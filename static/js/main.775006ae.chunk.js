(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,n,t){e.exports=t(320)},166:function(e,n,t){},291:function(e,n,t){e.exports=t.p+"static/media/icon-help.c70881f6.svg"},292:function(e,n,t){e.exports=t.p+"static/media/icon-settings.9693a6fc.svg"},293:function(e,n,t){e.exports=t.p+"static/media/dicematch-logo-wide.715a1ddf.svg"},320:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(57),i=t.n(c),u=(t(166),t(23)),o=t(24),l=t(26),s=t(25),d=t(27),f=t(3),m=t(6),b=t(33),v=t(2),p=t(58),g=t.n(p),h=t(7),O=t(34),E=t(9),j={ADD_SCORE:"ADD_SCORE",UPDATE_DIE:"UPDATE_DIE",REMOVE_DIE:"REMOVE_DIE",ADD_DIE:"ADD_DIE",MOVE_DIE:"MOVE_DIE",CASCADE_DICE:"CASCADE_DICE",INPUT_DISABLE:"INPUT_DISABLE",INPUT_ENABLE:"INPUT_ENABLE",ADD_MOVES:"ADD_MOVES",SET_LEVEL:"SET_LEVEL",GAME_END:"GAME_END",GAME_RESET:"GAME_RESET",OPEN_MODAL:"OPEN_MODAL",CLOSE_MODAL:"CLOSE_MODAL"},y={UP:"UP",DOWN:"DOWN",RANDOM:"RANDOM",BLOCKER:"BLOCKER",FLIP:"FLIP",BOMB:"BOMB"},x="ACTIVE",S="FINISHED",D="HELP",w=5,k=6;function z(){var e=Object(f.a)(["\n    ","\n    ","\n"]);return z=function(){return e},e}function _(){var e=Object(f.a)(["\n    ","\n    ","\n"]);return _=function(){return e},e}function A(){var e=Object(f.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    transform: translate3d(0, 0, 0);\n"]);return A=function(){return e},e}function M(){var e=Object(f.a)(["\n    position: relative;\n"]);return M=function(){return e},e}function I(){var e=Object(f.a)(["\n                animation: "," ","ms linear forwards;\n                transform-origin: top center;\n            "]);return I=function(){return e},e}function C(){var e=Object(f.a)(["\n                animation: "," 100ms ease-in-out forwards;\n            "]);return C=function(){return e},e}function T(){var e=Object(f.a)(["\n                animation: "," 10ms linear infinite;\n            "]);return T=function(){return e},e}function L(){var e=Object(f.a)(["\n                animation: "," ","ms linear forwards;\n                transform-origin: bottom center;\n            "]);return L=function(){return e},e}function N(){var e=Object(f.a)(["\n                animation: "," ","ms linear forwards;\n                transform-origin: bottom center;\n            "]);return N=function(){return e},e}function B(){var e=Object(f.a)(["\n                animation: "," 100ms ease-in-out forwards;\n            "]);return B=function(){return e},e}function P(){var e=Object(f.a)(["\n                animation: "," 10ms linear infinite;\n            "]);return P=function(){return e},e}function R(){var e=Object(f.a)(["\n                animation: "," ","ms linear forwards;\n                transform-origin: top center;\n            "]);return R=function(){return e},e}function U(){var e=Object(f.a)(["\n    0% {\n        transform: rotate(0deg);\n    }\n    25% {\n        transform: rotate(-","deg);\n    }\n    50% {\n      transform: rotate(0deg);\n    }\n    75% {\n        transform: rotate(","deg);\n    }\n"]);return U=function(){return e},e}function G(){var e=Object(f.a)(["\n    0% { transform: scaleX(1); filter: brightness(1); }\n    100% { transform: scaleX(0); filter: brightness(0.5); }\n"]);return G=function(){return e},e}function V(){var e=Object(f.a)(["\n    0% { transform: scaleX(0); filter: brightness(0.5); }\n    100% { transform: scaleX(1); filter: brightness(1); }\n"]);return V=function(){return e},e}function F(){var e=Object(f.a)(["\n    0% { transform: scaleY(1); filter: brightness(1); }\n    100% { transform: scaleY(0); filter: brightness(0.5); }\n"]);return F=function(){return e},e}function W(){var e=Object(f.a)(["\n    0% { transform: scaleY(0); filter: brightness(0.5); }\n    100% { transform: scaleY(1); filter: brightness(1); }\n"]);return W=function(){return e},e}var K=Object(v.e)(W()),X=Object(v.e)(F()),H=Object(v.e)(V()),J=Object(v.e)(G()),Y=function(e){return Object(v.e)(U(),e,e)},q=v.d.div(M()),Q=Object(v.c)(A()),Z=v.d.div(_(),Q,function(e){var n=e.dieType;e.diceSize;if(!e.animate)return null;switch(n){case y.DOWN:return Object(v.c)(R(),K,200);case y.RANDOM:return Object(v.c)(P(),Y(10));case y.FLIP:return Object(v.c)(B(),H);default:return Object(v.c)(N(),K,200)}}),$=v.d.div(z(),Q,function(e){var n=e.dieType;e.diceSize;switch(n){case y.DOWN:return Object(v.c)(L(),X,200);case y.RANDOM:return Object(v.c)(T(),Y(10));case y.FLIP:return Object(v.c)(C(),J);default:return Object(v.c)(I(),X,200)}}),ee=function(e){function n(){var e,t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(a)))).state={prevChildren:[]},t.removePrevChild=function(e){return function(){return t.setState(function(n){return{prevChildren:n.prevChildren.filter(function(n){return n.id!==e})}})}},t}return Object(d.a)(n,e),Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){var n=this;if(e.value!==this.props.value){var t=this.props.value;this.setState(function(e){return{prevChildren:[].concat(Object(E.a)(e.prevChildren),[{child:n.props.children,id:t,timeout:setTimeout(n.removePrevChild(t),200)}])}})}}},{key:"render",value:function(){var e=this,n=this.state.prevChildren,t=this.props,r=t.children,c=t.value;return a.a.createElement(q,{className:"FACE"},a.a.createElement(Z,Object.assign({},this.props,{animate:n.length,key:c}),r),n.map(function(n){var t=n.child,r=n.id;return a.a.createElement($,Object.assign({},e.props,{key:r}),t)}))}}]),n}(a.a.Component);function ne(){var e=Object(f.a)(["\n                background: ",";\n\n                circle {\n                    fill: ",";\n                    opacity: 0.7;\n                }\n            "]);return ne=function(){return e},e}function te(){var e=Object(f.a)(["\n                background: ",";\n                border-radius: 50%;\n\n                circle {\n                    fill: ",";\n                    opacity: 0.7;\n                }\n            "]);return te=function(){return e},e}function re(){var e=Object(f.a)(["\n                background: ",";\n\n                circle {\n                    fill: ",";\n                    opacity: 0.7;\n                }\n            "]);return re=function(){return e},e}function ae(){var e=Object(f.a)(["\n                background: ",";\n\n                circle {\n                    fill: ",";\n                    animation: "," ","ms ease-in-out infinite;\n                }\n            "]);return ae=function(){return e},e}function ce(){var e=Object(f.a)(["\n                background: ",";\n\n                circle {\n                    fill: ",";\n                    opacity: 0.4;\n                }\n            "]);return ce=function(){return e},e}function ie(){var e=Object(f.a)(["\n                background: ",";\n\n                circle {\n                    fill: ",";\n                    opacity: 0.7;\n                }\n            "]);return ie=function(){return e},e}function ue(){var e=Object(f.a)(["\n    0% { opacity: 0; }\n    50% { opacity: 1; }\n    100% { opacity: 0; }\n"]);return ue=function(){return e},e}var oe=Object(v.e)(ue()),le=function(e){var n=e.dieType,t=e.value;switch(n){case y.DOWN:return Object(v.c)(ie(),function(e){return e.theme.dice.down},function(e){return e.theme.dice.pip});case y.BLOCKER:return Object(v.c)(ce(),function(e){return e.theme.dice.blocker},function(e){return e.theme.dice.pip});case y.BOMB:return Object(v.c)(ae(),function(e){return e.theme.dice.blocker},function(e){return e.theme.dice.random},oe,200*t);case y.RANDOM:return Object(v.c)(re(),function(e){return e.theme.dice.random},function(e){return e.theme.dice.pip});case y.FLIP:return Object(v.c)(te(),function(e){return e.theme.dice.flip},function(e){return e.theme.dice.pip});case y.UP:default:return Object(v.c)(ne(),function(e){return e.theme.dice.up},function(e){return e.theme.dice.pip})}};function se(){var e=Object(f.a)(["\n    border-radius: 15%;\n\n    ","\n"]);return se=function(){return e},e}var de=v.d.svg(se(),le),fe=function(e,n){var t=.25*e;return t+n*(e-2*t)},me=function(e){var n=e.x,t=e.y,r=e.diceSize;Object(h.a)(e,["x","y","diceSize"]);return a.a.createElement("circle",{r:.08*r,cx:fe(r,n),cy:fe(r,t)})},be=function(e){var n=e.diceSize,t=Object(h.a)(e,["diceSize"]);return a.a.createElement(de,Object.assign({},t,{width:n,height:n}))},ve=function(e){var n=e.diceSize,t=Object(h.a)(e,["diceSize"]);return a.a.createElement(de,Object.assign({},t,{width:n,height:n}),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:.5,y:.5})))},pe=function(e){var n=e.diceSize,t=Object(h.a)(e,["diceSize"]);return a.a.createElement(de,Object.assign({},t,{width:n,height:n}),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:1})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:0})))},ge=function(e){var n=e.diceSize,t=Object(h.a)(e,["diceSize"]);return a.a.createElement(de,Object.assign({},t,{width:n,height:n}),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:1})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:.5,y:.5})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:0})))},he=function(e){var n=e.diceSize,t=Object(h.a)(e,["diceSize"]);return a.a.createElement(de,Object.assign({},t,{width:n,height:n}),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:0})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:1})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:0})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:1})))},Oe=function(e){var n=e.diceSize,t=Object(h.a)(e,["diceSize"]);return a.a.createElement(de,Object.assign({},t,{width:n,height:n}),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:0})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:1})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:.5,y:.5})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:0})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:1})))},Ee=function(e){var n=e.diceSize,t=Object(h.a)(e,["diceSize"]);return a.a.createElement(de,Object.assign({},t,{width:n,height:n}),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:0})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:.5})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:0,y:1})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:0})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:.5})),a.a.createElement(me,Object.assign({},t,{diceSize:n,x:1,y:1})))},je=function(e){switch(e.value){case 1:return a.a.createElement(ve,e);case 2:return a.a.createElement(pe,e);case 3:return a.a.createElement(ge,e);case 4:return a.a.createElement(he,e);case 5:return a.a.createElement(Oe,e);case 6:return a.a.createElement(Ee,e);default:return a.a.createElement(be,e)}};function ye(){var e=Object(f.a)(["\n    position: absolute;\n    transition: transform 0.5s ease-in;\n    perspective: 500px;\n    perspective-origin: 50% 50%;\n"]);return ye=function(){return e},e}function xe(){var e=Object(f.a)(["\n    padding: 0;\n    border: 0;\n\n    background: transparent;\n\n    text-align: center;\n\n    cursor: pointer;\n    outline: none;\n"]);return xe=function(){return e},e}var Se=v.d.div(xe()),De=v.d.div(ye()),we=function(e){var n=e.x,t=e.y,r=e.diceSize;return{transform:"translate(".concat(r*n,"px, ").concat(r*t+10,"px)")}},ke=function(e){var n=e.children,t=Object(h.a)(e,["children"]);return a.a.createElement(De,{style:we(t)},n)},ze=function(e){function n(){var e,t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(a)))).handleDieUpdate=function(){var e=t.props,n=e.moves,r=e.inputEnabled,a=e.dieType,c=e.updateDie,i=e.id;n.limit-n.used<=0||!r||a===y.BLOCKER||a===y.BOMB||c(i)},t}return Object(d.a)(n,e),Object(o.a)(n,[{key:"shouldComponentUpdate",value:function(e){var n=e.value,t=e.x,r=e.y;return!(n===this.props.value&&t===this.props.x&&r===this.props.y)}},{key:"render",value:function(){var e=this.props,n=e.diceSize,t=e.x,r=e.y,c=e.id;return a.a.createElement(ke,this.props,a.a.createElement(Se,Object.assign({},this.props,{onClick:this.handleDieUpdate,title:"id: ".concat(c," x: ").concat(t," y: ").concat(r)}),a.a.createElement(ee,this.props,a.a.createElement(je,Object.assign({},this.props,{diceSize:n-2})))))}}]),n}(a.a.Component);function _e(){var e=Object(f.a)(["\n    position: relative;\n"]);return _e=function(){return e},e}function Ae(){var e=Object(f.a)(["\n    padding: 0 10px;\n    overflow: hidden;\n    background: ",";\n"]);return Ae=function(){return e},e}var Me={transition:"opacity ".concat(300,"ms ease-in"),opacity:0},Ie={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0}},Ce=function(e){var n=e.children,t=Object(h.a)(e,["children"]);return a.a.createElement(O.Transition,Object.assign({},t,{timeout:300}),function(e){return a.a.createElement("span",{style:Object(m.a)({},Me,Ie[e])},n)})},Te=v.d.div(Ae(),function(e){return e.theme.background}),Le=v.d.div(_e()),Ne=function(e){var n=e.diceSize;return{width:n*w,height:n*k+20}},Be=function(e){var n=e.gameBoard,t=Object(h.a)(e,["gameBoard"]);return a.a.createElement(Te,null,a.a.createElement(Le,{style:Ne(t)},a.a.createElement(O.TransitionGroup,null,n.map(function(e,n){return a.a.createElement(Ce,{key:e.id},a.a.createElement(ze,Object.assign({},t,e)))}))))},Pe=t(14),Re=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:JSON.parse,a=Object(r.useState)(function(){try{var r=localStorage.getItem(e);return r?t(r):n}catch(a){return n}}),c=Object(Pe.a)(a,2),i=c[0],u=c[1];return[i,function(n){var t=n instanceof Function?n(i):n;u(t),localStorage.setItem(e,JSON.stringify(t))}]};function Ue(){var e=Object(f.a)(["\n    background: ","\n"]);return Ue=function(){return e},e}function Ge(){var e=Object(f.a)(["\n    text-align: left;\n\n    &.last {\n        text-align: right;\n    }\n"]);return Ge=function(){return e},e}function Ve(){var e=Object(f.a)(["\n    font-weight: bold;\n    text-align: left;\n\n    &.last {\n        text-align: right;\n    }\n"]);return Ve=function(){return e},e}function Fe(){var e=Object(f.a)(["\n    width: 100%;\n"]);return Fe=function(){return e},e}var We=v.d.table(Fe()),Ke=v.d.th(Ve()),Xe=v.d.td(Ge()),He=v.d.tr(Ue(),function(e){return e.currentScore?"yellow":"transparent"}),Je=function(e){var n=e.scores,t=e.currentScoreId;return a.a.createElement(We,null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement(Ke,null,"Score"),a.a.createElement(Ke,null,"Level"),a.a.createElement(Ke,{className:"last"},"Date"))),a.a.createElement("tbody",null,n.map(function(e){var n=e.id,r=e.endTime,c=e.score,i=e.level,u=t===n,o=(r&&new Date(r)).toLocaleDateString(void 0,{year:"numeric",month:"numeric",day:"numeric"});return a.a.createElement(He,{key:n,currentScore:u},a.a.createElement(Xe,null,c),a.a.createElement(Xe,null,i),a.a.createElement(Xe,{className:"last"},o))})))};function Ye(){var e=Object(f.a)(["\n    position: absolute;\n\n    top: 0;\n    right: 0;\n\n    width: 3rem;\n    height: 3rem;\n\n    border 0;\n\n    font-size: 1rem;\n    font-family: inherit;\n    color: ",";\n\n    background: transparent;\n"]);return Ye=function(){return e},e}function qe(){var e=Object(f.a)(["\n    background: ",";\n    padding: 1rem;\n    border-radius: 0.8rem;\n    text-align: center;\n    font-size: 1rem;\n\n    animation: "," 0.25s ease-in-out forwards;\n\n    .closing & {\n        animation: "," 0.25s ease-in-out forwards;\n    }\n"]);return qe=function(){return e},e}function Qe(){var e=Object(f.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    padding: 1rem;\n    background: rgba(0, 0, 0, 0.7);\n\n    animation: "," 0.25s ease-in-out forwards;\n\n    &.closing {\n        animation: "," 0.25s ease-in-out forwards;\n    }\n"]);return Qe=function(){return e},e}function Ze(){var e=Object(f.a)(["\n    0% { transform: scale(1); }\n    100% { transform: scale(0.9) }\n"]);return Ze=function(){return e},e}function $e(){var e=Object(f.a)(["\n    0% { opacity: 1; }\n    50% { opacity: 1; }\n    100% { opacity: 0; }\n"]);return $e=function(){return e},e}function en(){var e=Object(f.a)(["\n    0% { transform: scale(0.9); }\n    100% { transform: scale(1); }\n"]);return en=function(){return e},e}function nn(){var e=Object(f.a)(["\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n"]);return nn=function(){return e},e}var tn=Object(v.e)(nn()),rn=Object(v.e)(en()),an=Object(v.e)($e()),cn=Object(v.e)(Ze()),un=v.d.div(Qe(),tn,an),on=v.d.div(qe(),function(e){return e.theme.background},rn,cn),ln=v.d.button(Ye(),function(e){return e.theme.foreground}),sn=Object(b.b)(null,function(e){return{closeModal:function(){return e({type:j.CLOSE_MODAL})}}})(function(e){var n=e.showCloseButton,t=e.children,c=e.closeModal,i=Object(r.useState)(),u=Object(Pe.a)(i,2),o=u[0],l=u[1];return a.a.createElement(un,{className:o?"closing":void 0},a.a.createElement(on,null,n&&a.a.createElement(ln,{onClick:function(){l(!0),setTimeout(function(){c(),l(!1)},250)}},"X"),t))});function dn(){var e=Object(f.a)(["\n    padding: 10px 20px;\n    border: 0;\n    background: lightblue;\n    font-size: 18px;\n    outline: none;\n"]);return dn=function(){return e},e}var fn=v.d.button(dn()),mn=function(e){e.name;var n=e.score,t=e.level,c=t.level,i=t.clearedDice,u=t.upcomingDice,o=e.moves.used,l=e.tracking,s=l.gameId,d=l.gameStart,f=l.gameEnd,m=e.setInputActive,b=Re("dicematch.scores",[]),v=Object(Pe.a)(b,2),p=v[0],g=v[1],h={id:s,score:n,level:c,diceCleared:i,diceRemainingInLevel:u.length,turnsUsed:o,startTime:d,endTime:f};return Object(r.useEffect)(function(){if(!p.find(function(e){return e.id===s})){var e=p.filter(function(e){return!!e}).sort(function(e,n){return n.score-e.score}).slice(0,10),n=[].concat(Object(E.a)(e),[h]).sort(function(e,n){return n.score-e.score});g(n)}},[]),a.a.createElement(Je,{scores:p,currentScoreId:s,setInputActive:m})},bn=function(e){var n=e.restartGame,t=Object(h.a)(e,["restartGame"]);return a.a.createElement(sn,null,a.a.createElement("h1",null,"Game over"),a.a.createElement(mn,t),a.a.createElement("p",null,a.a.createElement(fn,{onClick:n},"Restart")))};function vn(){var e=Object(f.a)(["\n    height: 1.5rem;\n    width: 100%;\n\n    background-image: url(",");\n    background-size: contain;\n    background-position: center;\n    background-repeat: no-repeat;\n\n    font-size: 0;\n    color: rgba(0,0,0,0);\n"]);return vn=function(){return e},e}function pn(){var e=Object(f.a)(["\n    width: 2rem;\n    height: 2rem;\n    background-image: url(",");\n"]);return pn=function(){return e},e}function gn(){var e=Object(f.a)(["\n    width: 2rem;\n    height: 2rem;\n    background-image: url(",");\n"]);return gn=function(){return e},e}function hn(){var e=Object(f.a)(["\n    width: 3rem;\n    height: 3rem;\n\n    background-color: transparent;\n    background-size: 1.5rem;\n    background-position: center;\n    background-repeat: no-repeat;\n    border: 0;\n\n    font-size: 0;\n    color: rgba(0,0,0,0);\n"]);return hn=function(){return e},e}function On(){var e=Object(f.a)(["\n    display: grid;\n\n    width: 100vw;\n\n    grid-template-columns: 3rem auto 3rem;\n    grid-template-rows: 3rem;\n\n    justify-items: center;\n    align-items: center;\n\n    background: ",";\n"]);return On=function(){return e},e}var En=v.d.div(On(),function(e){return e.theme.backgroundSecondary}),jn=v.d.button(hn()),yn=Object(v.d)(jn)(gn(),t(291)),xn=(Object(v.d)(jn)(pn(),t(292)),v.d.div(vn(),t(293))),Sn=function(e){var n=e.openModal;return a.a.createElement(En,null,a.a.createElement(yn,{onClick:function(){return n(D)}},"Help"),a.a.createElement(xn,null,"DICE MATCH"))};function Dn(){var e=Object(f.a)(["\n    margin-left: 0.3rem;\n    font-size: 0.8rem;\n    color: ",";\n"]);return Dn=function(){return e},e}function wn(){var e=Object(f.a)(["\n    margin-right: 1px;\n\n    svg {\n        display: block;\n    }\n"]);return wn=function(){return e},e}function kn(){var e=Object(f.a)(["\n    grid-area: upcoming;\n\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .dice {\n        display: flex;\n        align-items: center;\n    }\n\n    .title {\n        margin-right: 1rem;\n\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ",";\n    }\n"]);return kn=function(){return e},e}var zn=v.d.div(kn(),function(e){return e.theme.header.textSecondary}),_n=v.d.div(wn()),An=v.d.span(Dn(),function(e){return e.theme.header.textSecondary}),Mn=function(e){var n=e.upcomingDice,t=n.slice(0,5),r=n.length-5;return a.a.createElement(zn,null,a.a.createElement("div",{className:"dice"},t.slice(0,5).map(function(e,n){return a.a.createElement(_n,{key:n},a.a.createElement(je,Object.assign({},e,{diceSize:18})))}),r>0&&a.a.createElement(An,null,"+ ",r)))};function In(){var e=Object(f.a)(["\n    display: flex;\n\n    align-items: center;\n    margin-bottom: 0.3rem;\n\n    font-size: 0.8rem;\n    font-weight: bold;\n    color: ",";\n\n    .title {\n        margin-right: 0.5rem;\n\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ",";\n    }\n"]);return In=function(){return e},e}function Cn(){var e=Object(f.a)(["\n    grid-area: level;\n    padding: 0.3rem 0.5rem 0.5rem;\n    background: ",";\n    border-radius: 0.5rem\n"]);return Cn=function(){return e},e}var Tn=v.d.div(Cn(),function(e){return e.theme.header.backgroundInset}),Ln=v.d.div(In(),function(e){return e.theme.header.text},function(e){return e.theme.header.textSecondary}),Nn=function(e){var n=e.level,t=e.upcomingDice;return a.a.createElement(Tn,null,a.a.createElement(Ln,null,a.a.createElement("span",{className:"title"},"Level"),a.a.createElement("span",{className:"score"},n)),a.a.createElement(Mn,{upcomingDice:t}))},Bn=t(15),Pn=t.n(Bn);function Rn(){var e=Object(f.a)(["\n    height: 100%;\n\n    background: ",";\n\n    border-right: 1px solid ",";\n    transition: background 0.1s linear;\n\n    &:last-of-type {\n        border-right: 0;\n    }\n"]);return Rn=function(){return e},e}function Un(){var e=Object(f.a)(["\n        animation: "," 0.1s linear infinite;\n    "]);return Un=function(){return e},e}function Gn(){var e=Object(f.a)(["\n        animation: "," 0.1s linear infinite;\n    "]);return Gn=function(){return e},e}function Vn(){var e=Object(f.a)(["\n        animation: "," 0.1s linear infinite;\n    "]);return Vn=function(){return e},e}function Fn(){var e=Object(f.a)(["\n        color: red;\n    "]);return Fn=function(){return e},e}function Wn(){var e=Object(f.a)(["\n    grid-area: moves;\n\n    display: grid;\n\n    width: auto;\n    height: 1.5rem;\n\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: auto;\n\n    border: 1px solid ",";\n    border-radius: 0.2rem;\n\n    box-shadow: 0 0 0 1px ",";\n\n    overflow: hidden;\n\n    ","\n\n    ","\n\n    ","\n\n    ","\n"]);return Wn=function(){return e},e}function Kn(){var e=Object(f.a)(["\n    0% {\n        transform: translate(0px, 0px);\n    }\n    25% {\n        transform: translate(","px, ","px);\n    }\n    50% {\n        transform: translate(0px, 0px);\n    }\n    75% {\n        transform: translate(","px, ","px);\n    }\n"]);return Kn=function(){return e},e}var Xn=function(e){return Object(v.e)(Kn(),e,e,-e,-e)},Hn=v.d.div(Wn(),function(e){return e.theme.moves.border},function(e){return e.theme.header.backgroundInset},function(e){return e.moves<6&&Object(v.c)(Fn())},function(e){return e.moves<=3&&Object(v.c)(Vn(),Xn(.25))},function(e){return e.moves<=2&&Object(v.c)(Gn(),Xn(.5))},function(e){return e.moves<=1&&Object(v.c)(Un(),Xn(1))}),Jn=v.d.div(Rn(),function(e){var n=e.ready,t=e.moves,r=e.theme;return n?t<=1?r.moves.danger:t<=3?r.moves.warning:r.moves.ready:r.moves.used},function(e){return e.theme.moves.insideBorder}),Yn=function(e){var n=e.moves,t=n.used,r=n.limit,c=n.cap,i=r-t;return a.a.createElement(Hn,{moves:i},Pn()(function(e){return a.a.createElement(Jn,{key:e,moves:i,ready:e<i})},c))};function qn(){var e=Object(f.a)(["\n    grid-area: score;\n\n    display: flex;\n\n    align-items: center;\n    justify-content: space-between;\n\n    padding: 0.2rem 0.5rem;\n    background: ",";\n    border-radius: 0.5rem;\n\n    font-size: 1.2rem;\n    color: ",";\n\n    .title {\n        font-size: 0.8rem;\n        font-weight: bold;\n        color: ",";\n    }\n"]);return qn=function(){return e},e}var Qn=v.d.div(qn(),function(e){return e.theme.header.backgroundInset},function(e){return e.theme.header.text},function(e){return e.theme.header.textSecondary}),Zn=function(e){var n=e.score;return a.a.createElement(Qn,null,a.a.createElement("span",{className:"title"},"Score"),a.a.createElement("span",{className:"score"},n))};function $n(){var e=Object(f.a)(['\n    display: grid;\n\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: auto auto;\n\n    column-gap: 0.5rem;\n    row-gap: 0.5rem;\n\n    padding: 0.5rem 0.5rem;\n\n    grid-template-areas:\n        "level score"\n        "moves moves";\n\n    background: ',";\n"]);return $n=function(){return e},e}var et=v.d.div($n(),function(e){return e.theme.backgroundSecondary}),nt=function(e){return a.a.createElement(et,null,a.a.createElement(Zn,e),a.a.createElement(Nn,e.level),a.a.createElement(Yn,e))},tt=t(148),rt=t.n(tt);function at(){var e=Object(f.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n\n    font-size: 48px;\n    pointer-events: none;\n    touch-action: none;\n    color: white;\n\n    text-shadow: 0 0 5px rgba(0,0,0,1);\n"]);return at=function(){return e},e}var ct=v.d.div(at()),it={position:"absolute",top:"50%",left:"50%",textAlign:"center",width:150,height:50,marginLeft:-75,marginTop:-25,transition:"opacity ".concat(200,"ms ease-out, transform ").concat(200,"ms ease-out"),opacity:0,transform:"scale(0.5)"},ut={entering:{opacity:0,transform:"scale(0.5)"},entered:{opacity:1,transform:"scale(1)"},exiting:{opacity:0,transform:"scale(2.5)"}},ot=function(e){var n=e.children,t=Object(h.a)(e,["children"]);return a.a.createElement(O.Transition,Object.assign({},t,{timeout:200}),function(e){return a.a.createElement("div",{style:Object(m.a)({},it,ut[e])},n)})},lt=function(e){function n(){var e,t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(a)))).state={announcements:[]},t.aId=0,t}return Object(d.a)(n,e),Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){var n=this,t=e.score;e.gameState;if(this.props.score!==t&&this.props.gameState!==S){var r=t-this.props.score;this.setState(function(e){return{announcements:[].concat(Object(E.a)(e.announcements),[{id:n.aId,value:r}])}}),this.aId=this.aId+1,setTimeout(function(){n.setState(function(e){return{announcements:rt()(1,e.announcements)}})},1e3)}}},{key:"render",value:function(){var e=this.state.announcements;return a.a.createElement(ct,null,a.a.createElement(O.TransitionGroup,null,e.map(function(e,n){return a.a.createElement(ot,{key:e.id},"+ ",e.value)})))}}]),n}(a.a.Component),st=t(149),dt=t(152),ft=function(e,n){return function(t){return t<e?n:t>n?e:t}},mt=function(e){return Math.floor(Math.random()*e)+1},bt=function(e){return function(n,t){return n.id===t.id?e(n,t):n}},vt=bt(function(e,n){var t=e.value,r=Object(h.a)(e,["value"]);return Object(m.a)({},r,{value:ft(1,r.dieSize)(t+1)})}),pt=bt(function(e,n){var t=e.value,r=Object(h.a)(e,["value"]);return Object(m.a)({},r,{value:ft(1,r.dieSize)(t-1)})}),gt=bt(function(e,n){for(var t=e.value,r=Object(h.a)(e,["value"]),a=mt(r.dieSize);a===t;)a=mt(r.dieSize);return Object(m.a)({},r,{value:a})}),ht=function(e){switch(e){case 1:return 6;case 2:return 5;case 3:return 4;case 4:return 3;case 5:return 2;case 6:default:return 1}},Ot=bt(function(e,n){var t=e.value,r=Object(h.a)(e,["value"]);return Object(m.a)({},r,{value:ht(t)})}),Et=function(e,n){switch(e.dieType){case y.UP:return vt(e,n);case y.DOWN:return pt(e,n);case y.RANDOM:return gt(e,n);case y.FLIP:return Ot(e,n);case y.BOMB:return function(e,n){var t=e.value,r=Object(h.a)(e,["value"]);return Object(m.a)({},r,{value:t-1})}(e);default:return e}},jt=bt(function(e,n){var t=n.x,r=n.y;return Object(m.a)({},e,{x:t,y:r})});function yt(){var e=Object(f.a)(["\n    display: flex;\n    flex-direction: column;\n\n    align-items: flex-start;\n    justify-content: flex-start;\n\n    width: calc(64px + 2rem);\n    height: calc(64px + 2rem);\n\n    border 0;\n    padding: 1rem;\n\n    background: transparent;\n"]);return yt=function(){return e},e}function xt(){var e=Object(f.a)(["\n    position: relative;\n\n    display: flex;\n    flex-direction: column;\n\n    align-items: center;\n    justify-content: center;\n\n    width: 100%;\n    height: 100%;\n\n    p {\n        position: absolute;\n        bottom: -1rem;\n        color: ","\n    }\n"]);return xt=function(){return e},e}function St(){var e=Object(f.a)(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: flex;\n    height: 100%;\n\n    transition: left 0.3s ease-in-out;\n"]);return St=function(){return e},e}function Dt(){var e=Object(f.a)(["\n    position: absolute;\n    display: flex;\n\n    align-items: center;\n    justify-content: center;\n\n    top: 0;\n\n    width: 3rem;\n    height: 100%;\n\n    border 0;\n\n    font-size: 1rem;\n    font-family: inherit;\n    color: ",";\n\n    background: transparent;\n\n    z-index: 1;\n\n    &.left {\n        left: -1rem;\n\n        &.animate {\n            animation: "," 0.7s linear infinite;\n        }\n    }\n\n    &.right {\n        right: -1rem;\n\n        &.animate {\n            animation: "," 0.7s linear infinite;\n        }\n    }\n\n    &:disabled {\n        opacity: 0.2;\n    }\n"]);return Dt=function(){return e},e}function wt(){var e=Object(f.a)(["\n    0% { transform: translate(0, 0); }\n    5% { transform: translate(3px, 0); }\n    20% { transform: translate(0, 0); }\n    100% { transform: translate(0, 0); }\n"]);return wt=function(){return e},e}function kt(){var e=Object(f.a)(["\n    0% { transform: translate(0, 0); }\n    5% { transform: translate(-3px, 0); }\n    20% { transform: translate(0, 0); }\n    100% { transform: translate(0, 0); }\n"]);return kt=function(){return e},e}function zt(){var e=Object(f.a)(["\n    position: relative;\n    height: 12rem;\n    overflow: hidden;\n"]);return zt=function(){return e},e}var _t=v.d.div(zt()),At=Object(v.e)(kt()),Mt=Object(v.e)(wt()),It=v.d.button(Dt(),function(e){return e.theme.foreground},At,Mt),Ct=v.d.div(St()),Tt=v.d.div(xt(),function(e){return e.theme.foregroundSecondary}),Lt=v.d.button(yt()),Nt=[{id:1,dieType:y.UP,value:1,dieSize:6,description:"Increases in value",updater:vt},{id:2,dieType:y.DOWN,value:2,dieSize:6,description:"Goes down smooth",updater:pt},{id:3,dieType:y.FLIP,value:3,dieSize:6,description:"Flip-flops. Always adds to 7.",updater:Ot},{id:4,dieType:y.RANDOM,value:4,dieSize:6,description:"Rolls kinda wild.",updater:gt},{id:5,dieType:y.BLOCKER,value:5,dieSize:6,description:"Can\u2019t be moved. Still matches."},{id:6,dieType:y.BOMB,value:6,dieSize:6,description:"Explosive if it reaches zero."}],Bt=function(){var e=Object(r.useState)(0),n=Object(Pe.a)(e,2),t=n[0],c=n[1],i=Object(r.useState)(Nt),u=Object(Pe.a)(i,2),o=u[0],l=u[1],s=t<=0,d=t>=Nt.length-1,f=function(e){return c(Object(dt.clamp)(t+e,0,Nt.length-1))};return console.log("dieDescriptions",o),a.a.createElement(_t,null,a.a.createElement(It,{className:"left ".concat(d?"animate":""),onClick:function(){return f(-1)},disabled:s},"<"),a.a.createElement(It,{className:"right ".concat(s?"animate":""),onClick:function(){return f(1)},disabled:d},">"),a.a.createElement(Ct,{style:{width:"".concat(100*Nt.length,"%"),left:"".concat(-100*t,"%")}},o.map(function(e){var n=e.id,t=e.dieType,r=e.value,c=e.description,i=e.updater;return a.a.createElement(Tt,{key:n},a.a.createElement(Lt,{onClick:function(){i&&function(e){l(o.map(function(n){return n.updater?e!==n.id?n:n.updater(n,{id:e}):n}))}(n)}},a.a.createElement(ee,{dieType:t,value:r,diceSize:64},a.a.createElement(je,{dieType:t,value:r,diceSize:64}))),a.a.createElement("p",null,c))})))};function Pt(){var e=Object(f.a)(["\n    border: 1px solid ",";\n    border-radius: 0.5rem\n"]);return Pt=function(){return e},e}function Rt(){var e=Object(f.a)(["\n    margin-right: 1px;\n\n    svg {\n        display: block;\n    }\n"]);return Rt=function(){return e},e}function Ut(){var e=Object(f.a)(["\n    font-size: 1rem;\n"]);return Ut=function(){return e},e}function Gt(){var e=Object(f.a)(["\n    margin-left: -1rem;\n    margin-right: -1rem;\n\n    padding-bottom: 1rem;\n\n    border-bottom: 1px solid ",";\n\n    font-size: 1rem;\n    font-weight: bold;\n"]);return Gt=function(){return e},e}function Vt(){var e=Object(f.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return Vt=function(){return e},e}var Ft=v.d.p(Vt()),Wt=v.d.div(Gt(),function(e){return e.theme.divider}),Kt=v.d.p(Ut()),Xt=v.d.div(Rt()),Ht=v.d.div(Pt(),function(e){return e.theme.divider}),Jt=function(e){e.restartGame;var n=Object(h.a)(e,["restartGame"]);return a.a.createElement(sn,{showCloseButton:!0},a.a.createElement(Wt,null,"How to play"),a.a.createElement(Kt,null,"Tap a die to change its value."),a.a.createElement(Ft,null,a.a.createElement(Xt,null,a.a.createElement(je,{dieType:y.UP,value:3,diceSize:48})),a.a.createElement(Xt,null,a.a.createElement(je,{dieType:y.UP,value:3,diceSize:48})),a.a.createElement(Xt,null,a.a.createElement(je,{dieType:y.UP,value:3,diceSize:48}))),a.a.createElement(Kt,null,"Match three or more with the same value."),a.a.createElement(Ft,null,a.a.createElement(Ht,null,a.a.createElement(Nn,n.level))),a.a.createElement(Kt,null,"Clear all the dice from the level..."),a.a.createElement(Yn,{moves:{used:3,limit:10,cap:10}}),a.a.createElement(Kt,null,"...before you run out of turns."),a.a.createElement(Wt,null,"Meet the dice"),a.a.createElement(Bt,null))};function Yt(){var e=Object(f.a)(["\n    body {\n        background: ",";\n    }\n"]);return Yt=function(){return e},e}function qt(){var e=Object(f.a)(["\n    align-self: end;\n    padding: 1rem 0;\n    background: ",";\n"]);return qt=function(){return e},e}function Qt(){var e=Object(f.a)(["\n    display: grid;\n\n    grid-template-columns: auto;\n    grid-template-rows: auto auto 1fr;\n\n    height: 90vh;\n    width: 100vw;\n\n    background: ",";\n"]);return Qt=function(){return e},e}var Zt=g()(30,80),$t={white:"#ffffff",charcoal:"#282B40",charcoal_200:"#191D23",charcoal_100:"#111717",grey_500:"#757784",grey_700:"#9A9DAD",grey_900:"#C5C9D8",grey_1000:"#E6E8EF",grey_1100:"#f8f8f8",red:"#FC4349",teal:"#3C989B",green:"#14DD89",yellow:"#FFAC00",beige:"#CEC8B6"},er={colors:$t,foreground:$t.charcoal,foregroundSecondary:$t.grey_500,background:$t.white,backgroundSecondary:$t.grey_1000,divider:$t.grey_900,header:{background:$t.grey_1000,backgroundInset:$t.white,text:$t.charcoal,textSecondary:$t.grey_500},moves:{border:$t.grey_700,insideBorder:"rgba(0,0,0,0.2)",used:$t.grey_500,ready:$t.green,warning:$t.yellow,danger:$t.red},dice:{pip:$t.charcoal,up:$t.red,down:$t.teal,random:$t.yellow,blocker:$t.grey_500,flip:$t.beige}},nr=(Object(m.a)({},er,{background:$t.charcoal_200,backgroundSecondary:$t.charcoal_100,backgroundTertiary:$t.charcoal_100}),v.d.div(Qt(),function(e){return e.theme.background})),tr=v.d.div(qt(),function(e){return e.theme.background}),rr=Object(v.b)(Yt(),function(e){return e.theme.background}),ar=function(e){function n(){var e,t;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(a)))).state={diceSize:0},t.getDiceSize=function(){return t.setState(function(){return{diceSize:Zt((window.innerWidth-20)/w)}})},t}return Object(d.a)(n,e),Object(o.a)(n,[{key:"componentWillMount",value:function(){this.getDiceSize(),window.addEventListener("resize",this.getDiceSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.getDiceSize)}},{key:"render",value:function(){window.matchMedia("(prefers-color-scheme: dark)").matches;var e=er,n=this.props,t=n.gameState,r=n.modal,c=this.state.diceSize;return a.a.createElement(v.a,{theme:e},a.a.createElement(rr,null),a.a.createElement(st.a,null,a.a.createElement("meta",{name:"theme-color",content:e.backgroundSecondary})),a.a.createElement(nr,null,a.a.createElement(Sn,this.props),a.a.createElement(nt,this.props),a.a.createElement(tr,null,a.a.createElement(Be,Object.assign({},this.props,{diceSize:c})),a.a.createElement(lt,this.props)),t===S&&a.a.createElement(bn,this.props),r===D&&a.a.createElement(Jt,this.props)))}}]),n}(r.Component),cr=Object(b.b)(function(e){return e},function(e){return{updateDie:function(n){return e({type:j.UPDATE_DIE,id:n})},restartGame:function(){return e({type:j.GAME_RESET})},openModal:function(n){return e({type:j.OPEN_MODAL,modal:n})},closeModal:function(){return e({type:j.CLOSE_MODAL})}}})(ar),ir=t(30),ur=t(153),or=t(160),lr=t(89),sr=t(45),dr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;switch(e){case y.BOMB:return n;default:return mt(n)}},fr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return{id:Object(sr.a)(8),dieType:e,dieSize:n,value:dr(e,n)}},mr=function(e){return function(n,t){return e.find(function(e){return e&&e.x===n&&e.y===t})}},br=t(154),vr=t.n(br),pr=t(155),gr=t.n(pr),hr=t(156),Or=t.n(hr),Er=function(e,n){return e&&n&&e.value===n.value},jr=function(e){return e.id},yr=vr()(jr),xr=gr()(jr),Sr=function(e){var n=function(e){for(var n=mr(e),t=[],r=0;r<k;r++)for(var a=[],c=0;c<w;c++){var i=n(c,r),u=n(c+1,r);a.push(i);var o=Er(i,u);!o&&a.length>=3&&t.push(a),o||(a=[])}return t}(e),t=function(e){for(var n=mr(e),t=[],r=0;r<w;r++)for(var a=[],c=0;c<k;c++){var i=n(r,c),u=n(r,c+1);a.push(i);var o=Er(i,u);!o&&a.length>=3&&t.push(Or()(a)),o||(a=[])}return t}(e);return n=n.map(function(e){var n=t.find(function(n){return yr([n,e])});return n?(t=t.filter(function(e){return e!==n}),xr([].concat(Object(E.a)(e),Object(E.a)(n)))):e}),[].concat(Object(E.a)(n),Object(E.a)(t))},Dr=function(){for(var e;!e||Sr(e).length;)e=Pn()(function(){return fr(y.UP)},w*k).map(function(e,n){var t=n%w,r=Math.floor(n/w);return Object(m.a)({},e,{x:t,y:r})});return e},wr=function(e,n){return e.map(function(e){return function(e,n){switch(n.type){case j.UPDATE_DIE:return Et(e,n);case j.MOVE_DIE:return jt(e,n);default:return e}}(e,n)})},kr=function(e){var n=mr(e);return e.find(function(e){var t=e.x,r=e.y;e.id;return r<k-1&&!n(t,r+1)})},zr={used:0,limit:10,cap:10},_r=t(157),Ar=t.n(_r),Mr=g()(0,1/0),Ir=function(e){return Math.round(e)},Cr=function(e){return Math.log10(e)},Tr=function(e){return Mr(Ir(5*Cr(e)))},Lr=function(e){return Mr(Ir(4*Cr(e))-2)},Nr=function(e){return n=Mr(Ir(4*Cr(e))-2.5),Math.floor(n);var n},Br=function(e){return Mr(Ir(2.5*Cr(e))-2)},Pr=function(e){return e>=15&&e%5===0?1:0},Rr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0;n<e.length;n++){var t=e[n].value;if(e[n+1]&&e[n+1].value===t&&e[n+2]&&e[n+2].value===t)return console.log("found run",e,n,n+1,n+2),!0}return!1},Ur=function(e){var n;console.log("NEXT LEVEL",e,"UP",10,"DOWN",Tr(e),"FLIP",Lr(e),"RANDOM",Nr(e),"BLOCKER",Br(e),"BOMB",Pr(e),"total",10+Tr(e)+Nr(e)+Br(e)+Lr(e)+Pr(e));var t=0;do{n=Ar()([].concat(Object(E.a)(Pn()(function(){return fr(y.UP)},10)),Object(E.a)(Pn()(function(){return fr(y.DOWN)},Tr(e))),Object(E.a)(Pn()(function(){return fr(y.RANDOM)},Nr(e))),Object(E.a)(Pn()(function(){return fr(y.BLOCKER)},Br(e))),Object(E.a)(Pn()(function(){return fr(y.FLIP)},Lr(e))),Object(E.a)(Pn()(function(){return fr(y.BOMB)},Pr(e))))),t++}while(t<5&&Rr(n));return n},Gr=function(){return{level:1,clearedDice:0,upcomingDice:Ur(1)}},Vr=x,Fr={gameId:Object(sr.a)(),gameStart:new Date,gameEnd:null},Wr=Object(ir.c)({gameBoard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr(),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case j.UPDATE_DIE:return wr(e,n);case j.REMOVE_DIE:return function(e,n){return e.filter(function(e){return e.id!==n.id})}(e,n);case j.ADD_DIE:return function(e,n){var t=n.die;return[].concat(Object(E.a)(e),[t])}(e,n);case j.CASCADE_DICE:return function(e,n){for(var t=e,r=kr(t);r;)t=wr(t,{type:j.MOVE_DIE,id:r.id,x:r.x,y:r.y+1}),r=kr(t);return t}(e);case j.GAME_RESET:return Dr();default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case j.ADD_SCORE:return e+n.score*n.multiplier;case j.GAME_RESET:return 0;default:return e}},inputEnabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case j.INPUT_DISABLE:return!1;case j.INPUT_ENABLE:case j.GAME_RESET:return!0;default:return e}},moves:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case j.UPDATE_DIE:return Object(m.a)({},e,{used:e.used+1});case j.ADD_MOVES:return Object(m.a)({},e,{limit:Math.min(e.limit+n.moves,e.used+e.cap)});case j.GAME_RESET:return zr;default:return e}},level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr(),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case j.ADD_DIE:return function(e,n){var t=e.level,r=e.upcomingDice.slice(1);return 0===r.length&&(r=Ur(t+=1)),Object(m.a)({},e,{level:t,upcomingDice:r})}(e);case j.REMOVE_DIE:return Object(m.a)({},e,{clearedDice:e.clearedDice+1});case j.SET_LEVEL:return Object(m.a)({},e,{level:n.level,upcomingDice:Ur(n.level)});case j.GAME_RESET:return Gr();default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr;switch((arguments.length>1?arguments[1]:void 0).type){case j.GAME_END:return S;case j.GAME_RESET:return Vr;default:return e}},tracking:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr;switch((arguments.length>1?arguments[1]:void 0).type){case j.GAME_END:return Object(m.a)({},e,{gameEnd:new Date});case j.GAME_RESET:return{gameId:Object(sr.a)(),gameStart:new Date,gameEnd:null};default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case j.OPEN_MODAL:return n.modal;case j.CLOSE_MODAL:return null;default:return e}}}),Kr=t(16),Xr=t.n(Kr),Hr=t(8),Jr=t(158),Yr=t.n(Jr),qr=t(159),Qr=t.n(qr),Zr=Xr.a.mark(ua),$r=Xr.a.mark(oa),ea=Xr.a.mark(la),na=Xr.a.mark(fa),ta=Xr.a.mark(ma),ra=function(e){return new Promise(function(n){return setTimeout(n,e)})},aa=function(e){return e.id},ca=function(e){switch(e){case 3:return 0;case 4:return 100;case 5:return 300;case 6:return 500;default:return Math.max(300*(e-6),0)+500}},ia=function(e,n){return n*(e<=3?10:20)};function ua(e){var n,t,r,a;return Xr.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Hr.c)();case 2:return n=c.sent,t=n.level.upcomingDice[0],r=e.x,a=-k,c.next=8,Object(Hr.b)({type:j.ADD_DIE,die:Object(m.a)({},t,{x:r,y:a})});case 8:return c.next=10,ra(100);case 10:return c.next=12,Object(Hr.b)({type:j.CASCADE_DICE});case 12:case"end":return c.stop()}},Zr)}function oa(e,n){var t,r,a,c,i,u,o,l,s,d;return Xr.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(Hr.c)();case 2:return t=f.sent,r=t.gameBoard.map(aa),a=e.filter(function(e){return Qr()(aa(e),r)}),f.next=7,Object(Hr.a)(a.map(function(e){return Object(Hr.b)({type:j.REMOVE_DIE,id:e.id})}));case 7:return f.next=9,ra(250);case 9:return f.next=11,Object(Hr.b)({type:j.CASCADE_DICE});case 11:return c=ca(a.length)+ia(a.length,Yr()(a).value),f.next=14,Object(Hr.b)({type:j.ADD_SCORE,score:c,multiplier:n});case 14:return f.next=16,ra(250);case 16:i=!0,u=!1,o=void 0,f.prev=19,l=a[Symbol.iterator]();case 21:if(i=(s=l.next()).done){f.next=28;break}return d=s.value,f.next=25,ua(d);case 25:i=!0,f.next=21;break;case 28:f.next=34;break;case 30:f.prev=30,f.t0=f.catch(19),u=!0,o=f.t0;case 34:f.prev=34,f.prev=35,i||null==l.return||l.return();case 37:if(f.prev=37,!u){f.next=40;break}throw o;case 40:return f.finish(37);case 41:return f.finish(34);case 42:return f.next=44,ra(100);case 44:case"end":return f.stop()}},$r,null,[[19,30,34,42],[35,,37,41]])}function la(e){var n,t,r,a,c,i,u,o,l,s,d=arguments;return Xr.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:1,f.next=3,ra(100);case 3:if(e.length){f.next=5;break}return f.abrupt("return");case 5:return f.next=7,Object(Hr.c)();case 7:t=f.sent,r=!0,a=!1,c=void 0,f.prev=11,i=e[Symbol.iterator]();case 13:if(r=(u=i.next()).done){f.next=22;break}return o=u.value,f.next=17,oa(o,n);case 17:return f.next=19,ra(250);case 19:r=!0,f.next=13;break;case 22:f.next=28;break;case 24:f.prev=24,f.t0=f.catch(11),a=!0,c=f.t0;case 28:f.prev=28,f.prev=29,r||null==i.return||i.return();case 31:if(f.prev=31,!a){f.next=34;break}throw c;case 34:return f.finish(31);case 35:return f.finish(28);case 36:return f.next=38,Object(Hr.c)();case 38:if(l=f.sent,s=Sr(l.gameBoard),t.level.level===l.level.level){f.next=43;break}return f.next=43,Object(Hr.b)({type:j.ADD_MOVES,moves:10});case 43:return f.next=45,ra(300);case 45:if(!s.length){f.next=49;break}return f.next=48,la(s,n+1);case 48:return f.abrupt("return",f.sent);case 49:case"end":return f.stop()}},ea,null,[[11,24,28,36],[29,,31,35]])}var sa=[[0,0],[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],da=function(e){var n=mr(e);return e.filter(function(e){return e.dieType===y.BOMB&&e.value<=0}).map(function(e){return sa.map(function(t){var r=Object(Pe.a)(t,2),a=r[0],c=r[1];return n(e.x+a,e.y+c)}).filter(function(e){return!!e})})};function fa(){var e,n,t,r,a;return Xr.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Hr.b)({type:j.INPUT_DISABLE});case 2:return c.next=4,Object(Hr.c)();case 4:if(e=c.sent,!(n=Sr(e.gameBoard)).length){c.next=11;break}return c.next=9,ra(250);case 9:return c.next=11,la(n,1);case 11:return c.next=13,Object(Hr.c)();case 13:if(t=c.sent,!(r=da(t.gameBoard)).length){c.next=20;break}return c.next=18,ra(250);case 18:return c.next=20,la(r,1);case 20:return c.next=22,Object(Hr.b)({type:j.INPUT_ENABLE});case 22:return c.next=24,Object(Hr.c)();case 24:if(!((a=c.sent).moves.limit-a.moves.used<=0)){c.next=31;break}return c.next=28,ra(800);case 28:return c.next=30,Object(Hr.b)({type:j.GAME_END});case 30:return c.abrupt("return",c.sent);case 31:case"end":return c.stop()}},na)}function ma(){return Xr.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Hr.d)(j.UPDATE_DIE,fa);case 2:case"end":return e.stop()}},ta)}var ba=ma,va=function(){var e=Object(or.a)(),n=Object(ir.a)(Object(ur.createLogger)({collapsed:!0,duration:!0}),Object(lr.save)({namespace:"dicematch.state",ignoreStates:["inputEnabled"]}),e)(ir.d)(Wr,Object(lr.load)({namespace:"dicematch.state"}));return e.run(ba),window._store=n,n}();i.a.render(a.a.createElement(b.a,{store:va},a.a.createElement(cr,{store:va})),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.775006ae.chunk.js.map